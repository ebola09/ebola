<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ebola arcade</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="assets/favicon.png">
    <link rel="stylesheet" href="../css/themes.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">
    <script src="../js/themes.js"></script>
</head>

<script>
        // The sequence we want to detect
        const sequence = ['t', 'r', 'e', 'e'];
        let currentIndex = 0;

        // Listen for key presses
        document.addEventListener('keydown', (event) => {
            // Check if the key matches the current position in the sequence
            if (event.key.toLowerCase() === sequence[currentIndex]) {
                currentIndex++;
                // If we've completed the sequence, redirect
                if (currentIndex === sequence.length) {
                    window.location.href = 'tree.html';
                }
            } else {
                // Reset if the key doesn't match
                currentIndex = 0;
            }
        });
    </script>
<body>
    

    <div class="topbar">
        <div class="left">
            <a href="#" class="active">arcade</a>
            <a href="#">more coming soon</a>
        </div>
        <div class="logo">
  <svg width="251" height="88" viewBox="0 0 251 88" fill="none" xmlns="http://www.w3.org/2000/svg">
<g filter="url(#filter0_di_36_21)">
<path d="M172 75V62.5H182.375V50H213.625V37.5H182.375V25H224.125V37.5H234.5V75H244.875V87.5H224.125V75H213.625V62.5H192.875V75H213.625V87.5H182.375V75H172Z" fill="white"/>
</g>
<g filter="url(#filter1_di_36_21)">
<path d="M177.625 75H188.125V87.5H146.375V75H156.875V12.5H146.375V0H177.625V75Z" fill="white"/>
</g>
<g filter="url(#filter2_di_36_21)">
<path d="M104 75V37.5H114.375V25H156.125V37.5H166.5V75H156.125V87.5H114.375V75H104ZM124.875 75H145.625V37.5H124.875V75Z" fill="white"/>
</g>
<g filter="url(#filter3_di_36_21)">
<path d="M52 87.5V75H62.375V12.5H52V0H83.25V37.5H114.5V50H124.875V75H114.5V87.5H83.25V75H104.125V50H83.25V75H72.875V87.5H52Z" fill="white"/>
</g>
<g filter="url(#filter4_di_36_21)">
<path d="M0 75V37.5H10.375V25H52.125V37.5H62.5V62.5H20.875V75H52.125V87.5H10.375V75H0ZM20.875 37.5V50H41.625V37.5H20.875Z" fill="white"/>
</g>
<defs>
<filter id="filter0_di_36_21" x="172" y="25" width="78.875" height="66.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dx="6"/>
<feComposite in2="hardAlpha" operator="out"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_36_21"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_36_21" result="shape"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="4"/>
<feGaussianBlur stdDeviation="2"/>
<feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
<feBlend mode="normal" in2="shape" result="effect2_innerShadow_36_21"/>
</filter>
<filter id="filter1_di_36_21" x="146.375" y="0" width="47.75" height="91.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dx="6"/>
<feComposite in2="hardAlpha" operator="out"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_36_21"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_36_21" result="shape"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="4"/>
<feGaussianBlur stdDeviation="2"/>
<feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
<feBlend mode="normal" in2="shape" result="effect2_innerShadow_36_21"/>
</filter>
<filter id="filter2_di_36_21" x="104" y="25" width="68.5" height="66.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dx="6"/>
<feComposite in2="hardAlpha" operator="out"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_36_21"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_36_21" result="shape"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="4"/>
<feGaussianBlur stdDeviation="2"/>
<feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
<feBlend mode="normal" in2="shape" result="effect2_innerShadow_36_21"/>
</filter>
<filter id="filter3_di_36_21" x="52" y="0" width="78.875" height="91.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dx="6"/>
<feComposite in2="hardAlpha" operator="out"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_36_21"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_36_21" result="shape"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="4"/>
<feGaussianBlur stdDeviation="2"/>
<feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
<feBlend mode="normal" in2="shape" result="effect2_innerShadow_36_21"/>
</filter>
<filter id="filter4_di_36_21" x="0" y="25" width="68.5" height="66.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
<feFlood flood-opacity="0" result="BackgroundImageFix"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dx="6"/>
<feComposite in2="hardAlpha" operator="out"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
<feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_36_21"/>
<feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_36_21" result="shape"/>
<feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
<feOffset dy="4"/>
<feGaussianBlur stdDeviation="2"/>
<feComposite in2="hardAlpha" operator="arithmetic" k2="-1" k3="1"/>
<feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
<feBlend mode="normal" in2="shape" result="effect2_innerShadow_36_21"/>
</filter>
</defs>
</svg>
</div>

        <div class="right">
            <a id="settingsButton">settings</a>
        </div>
    </div>

    <div class="main-content">
        <div class="ad-sidebar">
            <div id="adContainer" class="ad-scroll">
                <!-- New games will be populated here -->
            </div>
        </div>
        <div class="games-container">
            <div class="grid-section">
                <h2 class="grid-title">recently played</h2>
                <div id="recentlyPlayedGrid"></div>
            </div>

            <div class="grid-section">
                <div class="grid-title-container">
                    <h2 class="grid-title">all games</h2>
                    <input type="text" class="search-input" id="gameSearch" placeholder="search">
                </div>
                <div id="gameGrid"></div>
            </div>
        </div>
    </div>

    <div class="bottombar">© 2026 ebola | version 1.7.7</div>

    <div id="settingsPanel" class="settings-panel">
        <h3>settings</h3>
        <label for="themeSelect">theme:</label>
        <select id="themeSelect">
            <option value="orange">orange</option>
            <option value="purple">purple</option>
            <option value="green">green</option>
            <option value="blue">blue</option>
            <option value="teal">teal</option>
            <option value="rose">rose</option>
        </select>
        <button id="exportProgress">export game progress</button>
        <button id="importProgress">import game progress</button>
        <input type="file" id="importFile" accept=".json" style="display:none;">
    </div>

    <script>
        const MAX_RECENT = 5;
        const recentlyPlayedGrid = document.getElementById("recentlyPlayedGrid");
        const gameGrid = document.getElementById("gameGrid");
        const settingsButton = document.getElementById("settingsButton");
        const settingsPanel = document.getElementById("settingsPanel");
        const themeSelect = document.getElementById("themeSelect");
        const importButton = document.getElementById("importProgress");
        const importFile = document.getElementById("importFile");

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            return parts.length === 2 ? parts.pop().split(';').shift() : null;
        }
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + days*24*60*60*1000);
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = `${name}=${value}${expires}; path=/`;
        }

        function getRecentlyPlayed() {
            const cookie = getCookie("recentlyPlayed");
            if (!cookie) return [];
            try { return JSON.parse(cookie); } catch { return []; }
        }

        function saveRecentlyPlayed(games) {
            setCookie("recentlyPlayed", JSON.stringify(games), 30);
        }

        function updateRecentlyPlayedUI(games) {
            recentlyPlayedGrid.innerHTML = "";
            if (!games.length) {
                recentlyPlayedGrid.innerHTML = "<p style='color: var(--link-color);'>you haven't played any games yet :(</p>";
                return;
            }
            games.forEach(game => {
                const card = document.createElement("a");
                card.href = game.path || "#";
                card.className = "card";
                card.style.backgroundImage = `url('${game.thumbnail || ""}')`;
                card.setAttribute("data-title", game.name || "Untitled");
                recentlyPlayedGrid.appendChild(card);
            });
        }

        function addRecentlyPlayed(game) {
            const recent = getRecentlyPlayed().filter(g => g.name !== game.name);
            recent.unshift(game);
            if (recent.length > MAX_RECENT) recent.pop();
            saveRecentlyPlayed(recent);
            updateRecentlyPlayedUI(recent);
        }

        function getFavorites() {
            const cookie = getCookie("favorites");
            if (!cookie) return [];
            try { return JSON.parse(cookie); } catch { return []; }
        }

        function saveFavorites(games) {
            setCookie("favorites", JSON.stringify(games), 30);
        }

        function isFavorited(game) {
            return getFavorites().some(f => f.name === game.name);
        }

        function toggleFavorite(game) {
            let favs = getFavorites();
            if (isFavorited(game)) {
                favs = favs.filter(f => f.name !== game.name);
            } else {
                favs.push(game);
            }
            saveFavorites(favs);
            // Re-display current view
            const query = gameSearch.value.toLowerCase();
            let gamesToDisplay = allGames;
            if (query) {
                gamesToDisplay = allGames.filter(g => {
                    const nameMatch = (g.name || "").toLowerCase().includes(query);
                    const tagMatch = g.tags && g.tags.some(tag => tag.toLowerCase().includes(query));
                    return nameMatch || tagMatch;
                });
            }
            displayGames(sortGames(gamesToDisplay));
        }

        function sortGames(games) {
            return games.sort((a, b) => {
                const aFav = isFavorited(a);
                const bFav = isFavorited(b);
                if (aFav && !bFav) return -1;
                if (!aFav && bFav) return 1;
                return (a.name || "").toLowerCase().localeCompare((b.name || "").toLowerCase());
            });
        }

        document.addEventListener("DOMContentLoaded", () => updateRecentlyPlayedUI(getRecentlyPlayed()));

        if (!localStorage.getItem("gameProgress")) localStorage.setItem("gameProgress", "{}");

        document.getElementById("exportProgress").addEventListener("click", () => {
            const allStorage = {};
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                allStorage[key] = localStorage.getItem(key);
            }
            const blob = new Blob([JSON.stringify(allStorage, null, 2)], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "localStorage_backup.json";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });

        importButton.addEventListener("click", () => importFile.click());
        importFile.addEventListener("change", e => {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = () => {
                try {
                    localStorage.setItem("gameProgress", JSON.stringify(JSON.parse(reader.result)));
                    alert("Game progress imported successfully!");
                } catch {
                    alert("Invalid JSON file. Please select a valid game progress file.");
                }
            };
            reader.readAsText(file);
            e.target.value = "";
        });

        function setTheme(theme) {
    const c = colors[theme];

    const root = document.documentElement;
    root.style.setProperty('--bg-color', c.bg);
    root.style.setProperty('--text-color', c.text);
    root.style.setProperty('--link-color', c.link);
    root.style.setProperty('--link-hover-color', c.hover);
    root.style.setProperty('--card-border-color', c.border);
    root.style.setProperty('--card-overlay-color', c.overlay);
    root.style.setProperty('--bottombar-border-color', c.bottomBorder);
    root.style.setProperty('--bottombar-opacity', c.opacity);

    document.querySelectorAll('.tos-button').forEach(btn => {
        btn.style.backgroundColor = c.bg;
        btn.style.color = c.text;
        btn.style.borderColor = c.border;
    });

    const svg = document.querySelector('.topbar .logo svg');
    if (svg) svg.querySelectorAll('path').forEach(path => path.setAttribute('fill', c.svgColor));

    setCookie("theme", theme, 30);
}


        const savedTheme = getCookie("theme");
        if (savedTheme) {
            setTheme(savedTheme);
            themeSelect.value = savedTheme;
        } else {
            setCookie("theme", "orange", 30);
            setTheme("orange");
            themeSelect.value = "orange";
        }

        settingsButton.addEventListener("click", () => {
            const isOpen = settingsPanel.style.display === "block";
            settingsPanel.style.display = isOpen ? "none" : "block";
            settingsButton.classList.toggle('settings-open', !isOpen);
        });

        themeSelect.addEventListener("change", () => setTheme(themeSelect.value));

        let allGames = [];

        function displayGames(games) {
            gameGrid.innerHTML = "";
            games.forEach(game => {
                const card = document.createElement("a");
                card.href = game.path || "#";
                card.className = "card";
                if (isFavorited(game)) card.classList.add("favorited");
                card.style.backgroundImage = `url('${game.thumbnail || ""}')`;
                card.setAttribute("data-title", game.name || "Untitled");
                card.addEventListener("click", () => addRecentlyPlayed(game));
                // Favorite badge
                const favoriteBadge = document.createElement("div");
                favoriteBadge.className = "favorite-badge";
                favoriteBadge.textContent = isFavorited(game) ? "★" : "☆";
                favoriteBadge.addEventListener("click", (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleFavorite(game);
                });
                card.appendChild(favoriteBadge);
                if (game.tags && game.tags.includes("new")) {
                    const newBadge = document.createElement("div");
                    newBadge.className = "new-badge";
                    newBadge.textContent = "new";
                    card.appendChild(newBadge);
                }
                gameGrid.appendChild(card);
            });
        }

        fetch("gameList.json")
            .then(res => res.json())
            .then(data => {
                if (!data.games?.length) {
                    gameGrid.innerHTML = `<p style="color: var(--link-color);">No games found. Check gameList.json.</p>`;
                    return;
                }
                data.games.sort((a,b) => (a.name||"").toLowerCase().localeCompare((b.name||"").toLowerCase()));
                allGames = sortGames(data.games);
                const newGames = data.games.filter(g => g.tags && g.tags.includes("new"));
                const adContainer = document.getElementById("adContainer");
                if (newGames.length > 0) {
                    newGames.forEach(game => {
                        const adItem = document.createElement("a");
                        adItem.href = game.path || "#";
                        adItem.className = "ad-item";
                        adItem.style.backgroundImage = `url('${game.thumbnail || ""}')`;
                        adItem.setAttribute("data-title", game.name || "Untitled");
                        adItem.addEventListener("click", () => addRecentlyPlayed(game));
                        adContainer.appendChild(adItem);
                    });
                    // duplicate for seamless scroll
                    newGames.forEach(game => {
                        const adItem = document.createElement("a");
                        adItem.href = game.path || "#";
                        adItem.className = "ad-item";
                        adItem.style.backgroundImage = `url('${game.thumbnail || ""}')`;
                        adItem.setAttribute("data-title", game.name || "Untitled");
                        adItem.addEventListener("click", () => addRecentlyPlayed(game));
                        adContainer.appendChild(adItem);
                    });
                } else {
                    adContainer.innerHTML = "<p style='color: var(--link-color); font-size: 14px;'>No new games</p>";
                }
                displayGames(allGames);
            })
            .catch(err => {
                gameGrid.innerHTML = `<p style="color: var(--link-color);">Failed to load gameList.json</p>`;
                console.error("Error loading game list:", err);
            });

        const gameSearch = document.getElementById("gameSearch");
        gameSearch.addEventListener("input", () => {
            const query = gameSearch.value.toLowerCase();
            const filteredGames = allGames.filter(game => {
                const nameMatch = (game.name || "").toLowerCase().includes(query);
                const tagMatch = game.tags && game.tags.some(tag => tag.toLowerCase().includes(query));
                return nameMatch || tagMatch;
            });
            displayGames(sortGames(filteredGames));
        });

    </script>
</body>
</html>



