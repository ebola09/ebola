
<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' lang='' xml:lang=''>
<head>

	<script type="text/javascript">
(function () {
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent)
        || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);

    if (isIOS) {
        alert("Warning: This game doesn't work on iOS!");
    }
})();
</script>

	<base href="https://cdn.jsdelivr.net/gh/gn-math/assets@main/286/">
	<meta charset='utf-8' />
	<meta name='viewport' content='width=device-width, user-scalable=no' />
	<title>Endoparasitic</title>
	<link rel="stylesheet" href="style.css">
<link id='-gd-engine-icon' rel='icon' type='image/png' href='Endoparasitic.icon.png' />
<link rel='apple-touch-icon' href='Endoparasitic.apple-touch-icon.png'/>

</head>
<body>
    <script src="main.js"></script>
    <div id="loading-text" style="color: white; font-family: cursive; font-size: 48px; text-align: center; margin-top: 20px;">LOADING...</div>
    <canvas id='canvas'>
        HTML5 canvas appears to be unsupported in the current browser.<br />
        Please try updating or use a different browser.
    </canvas>
    <div id='status'>
        <div id='status-progress' style='display: none;' oncontextmenu='event.preventDefault();'><div id ='status-progress-inner'></div></div>
        <div id='status-indeterminate' style='display: none;' oncontextmenu='event.preventDefault();'>
            <div></div><div></div><div></div><div></div>
            <div></div><div></div><div></div><div></div>
        </div>
        <div id='status-notice' class='godot' style='display: none;'></div>
    </div>

    <script type='text/javascript' src='Endoparasitic.js'></script>
    <script type='text/javascript'>
    const GODOT_CONFIG = {"args":[],"canvasResizePolicy":2,"executable":"Endoparasitic","experimentalVK":false,"fileSizes":{"Endoparasitic.pck":129276352,"Endoparasitic.wasm":17867504},"focusCanvas":true,"gdnativeLibs":[]};
    var engine = new Engine(GODOT_CONFIG);

    // Wait for the engine canvas to be ready
    window.addEventListener('load', () => {
        const canvas = document.getElementById('canvas');
        let leftClickHeld = false;
        let rightClickHeld = false;

        function triggerMouseEvent(type, button) {
            const event = new MouseEvent(type, {
                bubbles: true,
                cancelable: true,
                view: window,
                button: button // 0 = left, 2 = right
            });
            canvas.dispatchEvent(event);
        }

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                if (e.shiftKey && !rightClickHeld) {
                    rightClickHeld = true;
                    triggerMouseEvent('mousedown', 2);
                } else if (!e.shiftKey && !leftClickHeld) {
                    leftClickHeld = true;
                    triggerMouseEvent('mousedown', 0);
                }
                e.preventDefault();
            }
        });

        document.addEventListener('keyup', (e) => {
            if (e.code === 'Space') {
                if (rightClickHeld) {
                    rightClickHeld = false;
                    triggerMouseEvent('mouseup', 2);
                }
                if (leftClickHeld) {
                    leftClickHeld = false;
                    triggerMouseEvent('mouseup', 0);
                }
                e.preventDefault();
            }
        });
    });
</script>

</body>

</html>



