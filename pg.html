<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ebola Arcade</title>

    <!-- IBM Plex Mono Font -->
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        /* Theme Variables */
        :root {
            /* orangeTheme */
            --bg-color-orange: #0d0502;
            --text-color-orange: #ff7b00;
            --link-color-orange: #7A3307;
            --link-hover-color-orange: #ff7b00;
            --card-border-color-orange: #210D00;
            --card-overlay-color-orange: rgba(33, 13, 0, 0.75);
            --bottombar-border-color-orange: #7A3307;
            --bottombar-opacity-orange: 0.6;

            /* purpleTheme */
            --bg-color-purple: #0D0012;
            --text-color-purple: #A70EE8;
            --link-color-purple: #5A077D;
            --link-hover-color-purple: #A70EE8;
            --card-border-color-purple: #310046;
            --card-overlay-color-purple: rgba(49, 0, 70, 0.75);
            --bottombar-border-color-purple: #A70EE8;
            --bottombar-opacity-purple: 0.6;

            /* greenTheme */
            --bg-color-green: #000000;
            --text-color-green: #0EE811;
            --link-color-green: #077408;
            --link-hover-color-green: #0EE811;
            --card-border-color-green: #077408;
            --card-overlay-color-green: rgba(7, 116, 8, 0.75);
            --bottombar-border-color-green: #0EE811;
            --bottombar-opacity-green: 0.6;

            /* default theme (orange) */
            --bg-color: var(--bg-color-orange);
            --text-color: var(--text-color-orange);
            --link-color: var(--link-color-orange);
            --link-hover-color: var(--link-hover-color-orange);
            --card-border-color: var(--card-border-color-orange);
            --card-overlay-color: var(--card-overlay-color-orange);
            --bottombar-border-color: var(--bottombar-border-color-orange);
            --bottombar-opacity: var(--bottombar-opacity-orange);
        }

        body {
            margin: 0;
            font-family: 'IBM Plex Mono', monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding-top: 90px; /* space for fixed topbar */
            padding-bottom: 40px; /* space for fixed bottombar */
        }

        /* Top Navigation */
        .topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            font-size: 20px;
            height: 90px;
            background-color: var(--bg-color);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--bottombar-border-color);
        }

        .topbar .left, .topbar .right {
            display: flex;
            align-items: center;
        }

        .topbar a {
            color: var(--link-color);
            text-decoration: none;
            margin-right: 20px;
            cursor: pointer;
            transition: color 0.2s ease-in-out;
        }

        .topbar a:hover {
            color: var(--link-hover-color);
        }

        .topbar a.active {
            color: var(--link-hover-color);
        }

        .topbar .logo {
            height: 100%;
            display: flex;
            align-items: center;
            user-select: none;
            -webkit-user-drag: none;
        }

        .topbar .logo img {
            height: 60px;
            object-fit: contain;
            user-drag: none;
            user-select: none;
        }

        /* Game Grid */
        #gameGrid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 30px;
            padding: 20px 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .card {
            width: 100%;
            aspect-ratio: 1 / 1;
            background-size: cover;
            background-position: center;
            border-radius: 4px;
            border: 2px solid var(--card-border-color);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease-in-out, border-color 0.2s;
        }

        .card::after {
            content: attr(data-title);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0);
            color: var(--text-color);
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            opacity: 0;
            transition: background 0.2s ease-in-out, opacity 0.2s ease-in-out;
        }

        .card:hover::after {
            background: var(--card-overlay-color);
            opacity: 1;
        }

        .card:hover {
            transform: scale(1.05);
        }

        /* Bottom bar */
        .bottombar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            opacity: var(--bottombar-opacity);
            padding: 10px 40px;
            border-top: 1px solid var(--bottombar-border-color);
            font-size: 16px;
            text-align: left;
        }

        /* Responsive */
        @media (max-width: 1200px) { #gameGrid { grid-template-columns: repeat(4, 1fr); } }
        @media (max-width: 992px) { #gameGrid { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 768px) { #gameGrid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 500px) { #gameGrid { grid-template-columns: 1fr; } }
    </style>
</head>

<body>
    <div class="topbar">
        <div class="left">
            <a href="#" class="active">arcade</a>
            <a href="#">more coming soon</a>
        </div>

        <div class="logo">
            <img src="assets/logos/orangeLogo.png" alt="logo" />
        </div>

        <div class="right">
            <a onclick="setTheme('orange')">orange</a>
            <a onclick="setTheme('purple')">purple</a>
            <a onclick="setTheme('green')">green</a>
        </div>
    </div>

    <div id="gameGrid"></div>
    <div class="bottombar">version 1.0</div>

    <script>
        // Load theme from cookie or default
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days*24*60*60*1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + value + expires + "; path=/";
        }

        function setTheme(theme) {
            const root = document.documentElement;
            if(theme === "orange") {
                root.style.setProperty('--bg-color', getComputedStyle(root).getPropertyValue('--bg-color-orange'));
                root.style.setProperty('--text-color', getComputedStyle(root).getPropertyValue('--text-color-orange'));
                root.style.setProperty('--link-color', getComputedStyle(root).getPropertyValue('--link-color-orange'));
                root.style.setProperty('--link-hover-color', getComputedStyle(root).getPropertyValue('--link-hover-color-orange'));
                root.style.setProperty('--card-border-color', getComputedStyle(root).getPropertyValue('--card-border-color-orange'));
                root.style.setProperty('--card-overlay-color', getComputedStyle(root).getPropertyValue('--card-overlay-color-orange'));
                root.style.setProperty('--bottombar-border-color', getComputedStyle(root).getPropertyValue('--bottombar-border-color-orange'));
                root.style.setProperty('--bottombar-opacity', getComputedStyle(root).getPropertyValue('--bottombar-opacity-orange'));
                document.querySelector('.topbar .logo img').src = "assets/logos/orangeLogo.png";
            }
            else if(theme === "purple") {
                root.style.setProperty('--bg-color', getComputedStyle(root).getPropertyValue('--bg-color-purple'));
                root.style.setProperty('--text-color', getComputedStyle(root).getPropertyValue('--text-color-purple'));
                root.style.setProperty('--link-color', getComputedStyle(root).getPropertyValue('--link-color-purple'));
                root.style.setProperty('--link-hover-color', getComputedStyle(root).getPropertyValue('--link-hover-color-purple'));
                root.style.setProperty('--card-border-color', getComputedStyle(root).getPropertyValue('--card-border-color-purple'));
                root.style.setProperty('--card-overlay-color', getComputedStyle(root).getPropertyValue('--card-overlay-color-purple'));
                root.style.setProperty('--bottombar-border-color', getComputedStyle(root).getPropertyValue('--bottombar-border-color-purple'));
                root.style.setProperty('--bottombar-opacity', getComputedStyle(root).getPropertyValue('--bottombar-opacity-purple'));
                document.querySelector('.topbar .logo img').src = "assets/logos/purpleLogo.png";
            }
            else if(theme === "green") {
                root.style.setProperty('--bg-color', getComputedStyle(root).getPropertyValue('--bg-color-green'));
                root.style.setProperty('--text-color', getComputedStyle(root).getPropertyValue('--text-color-green'));
                root.style.setProperty('--link-color', getComputedStyle(root).getPropertyValue('--link-color-green'));
                root.style.setProperty('--link-hover-color', getComputedStyle(root).getPropertyValue('--link-hover-color-green'));
                root.style.setProperty('--card-border-color', getComputedStyle(root).getPropertyValue('--card-border-color-green'));
                root.style.setProperty('--card-overlay-color', getComputedStyle(root).getPropertyValue('--card-overlay-color-green'));
                root.style.setProperty('--bottombar-border-color', getComputedStyle(root).getPropertyValue('--bottombar-border-color-green'));
                root.style.setProperty('--bottombar-opacity', getComputedStyle(root).getPropertyValue('--bottombar-opacity-green'));
                document.querySelector('.topbar .logo img').src = "assets/logos/greenLogo.png";
            }
            setCookie("theme", theme, 30);
        }

        // Apply theme from cookie on load
        const savedTheme = getCookie("theme");
        if(savedTheme) setTheme(savedTheme);

        // LOAD GAMES FROM JSON AND ADD TO PAGE
        fetch("gameList.json")
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById("gameGrid");
                if (!data.games || data.games.length === 0) {
                    container.innerHTML = `<p style="color: var(--text-color);">No games found. Check gameList.json.</p>`;
                    return;
                }
                data.games.forEach(game => {
                    let card = document.createElement("a");
                    card.href = game.path || "#";
                    card.classList.add("card");
                    card.style.backgroundImage = `url('${game.thumbnail || ''}')`;
                    card.setAttribute("data-title", game.name || "Untitled");
                    container.appendChild(card);
                });
            })
            .catch(error => {
                document.getElementById("gameGrid").innerHTML = `<p style="color: var(--text-color);">Failed to load gameList.json</p>`;
                console.error("Error loading game list:", error);
            });
    </script>
</body>
</html>
