<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>tv arcade</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;600&display=swap" rel="stylesheet">

<style>
/* === UNCHANGED STYLE FROM YOUR PAGE === */
:root {
  --bg-color:#0d0502;
  --text-color:#ff7b00;
  --link-color:#7A3307;
  --link-hover-color:#ff7b00;
  --card-border-color:#210D00;
  --card-overlay-color:rgba(33,13,0,.75);
  --bottombar-border-color:#7A3307;
  --bottombar-opacity:.6;
}

body {
  margin:0;
  padding:90px 0 40px;
  font-family:'IBM Plex Mono',monospace;
  background:var(--bg-color);
  color:var(--text-color);
}

.topbar {
  position:fixed;
  top:0; left:0; right:0;
  height:90px;
  padding:0 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid var(--bottombar-border-color);
  background:var(--bg-color);
  z-index:1000;
}

.grid-section {
  max-width:1200px;
  margin:40px auto 0;
  padding:0 40px;
}

.grid-title-container {
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.search-input {
  background:var(--bg-color);
  color:var(--text-color);
  border:1px solid var(--card-border-color);
  padding:6px 8px;
  font-family:inherit;
}

#gameGrid, #recentlyPlayedGrid {
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:30px;
}

.card {
  aspect-ratio:1/1;
  background-size:cover;
  background-position:center;
  border:2px solid var(--card-border-color);
  border-radius:4px;
  position:relative;
  cursor:pointer;
}

.card::after {
  content:attr(data-title);
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  background:rgba(0,0,0,0);
  transition:.2s;
}

.card:hover::after {
  opacity:1;
  background:var(--card-overlay-color);
}

.bottombar {
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  padding:10px 40px;
  border-top:1px solid var(--bottombar-border-color);
  opacity:.6;
}
</style>
</head>

<body>

<div class="topbar">
  <div>tv arcade</div>
</div>

<div class="grid-section">
  <h2>recently viewed</h2>
  <div id="recentlyPlayedGrid"></div>
</div>

<div class="grid-section">
  <div class="grid-title-container">
    <h2>search tv</h2>
    <input id="search" class="search-input" placeholder="search shows">
  </div>
  <div id="gameGrid"></div>
</div>

<div class="bottombar">Â© 2026 tv arcade</div>

<script>
const grid = document.getElementById("gameGrid");
const recentGrid = document.getElementById("recentlyPlayedGrid");
const searchInput = document.getElementById("search");

function getRecent() {
  return JSON.parse(localStorage.getItem("recentShows") || "[]");
}

function saveRecent(show) {
  let recent = getRecent().filter(s => s.id !== show.id);
  recent.unshift(show);
  recent = recent.slice(0,5);
  localStorage.setItem("recentShows", JSON.stringify(recent));
  renderRecent();
}

function renderRecent() {
  recentGrid.innerHTML = "";
  getRecent().forEach(show => {
    const card = document.createElement("div");
    card.className = "card";
    card.style.backgroundImage =
      show.poster_path
      ? `url(https://image.tmdb.org/t/p/w500${show.poster_path})`
      : "";
    card.dataset.title = show.name;
    recentGrid.appendChild(card);
  });
}

async function searchTV(query) {
  const res = await fetch(`/api/tmdb?q=${encodeURIComponent(query)}`);
  const data = await res.json();

  grid.innerHTML = "";
  data.results.forEach(show => {
    const card = document.createElement("div");
    card.className = "card";
    card.dataset.title = show.name;
    card.style.backgroundImage =
      show.poster_path
      ? `url(https://image.tmdb.org/t/p/w500${show.poster_path})`
      : "";

    card.onclick = () => saveRecent(show);
    grid.appendChild(card);
  });
}

searchInput.addEventListener("input", e => {
  if (e.target.value.length > 1) {
    searchTV(e.target.value);
  } else {
    grid.innerHTML = "";
  }
});

renderRecent();
</script>

</body>
</html>
